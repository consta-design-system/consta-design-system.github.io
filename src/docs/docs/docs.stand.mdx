import { MdxMenu } from '@consta/stand';

Этот документ о том, как писать документацию для компонентов. В разделе про [структуру](#структура) есть шаблон: можно скопировать и использовать.

<MdxMenu>

- [Структура](#структура-компонента)
- [Настройки компонента](#настройки-компонента)
- [Вкладки](#вкладки)
  - [Обзор](#обзор)
  - [Код и свойство](#код-и-свойство)
  - [Дизайнерам](#дизайнерам)
  - [Песочница](#песочница)
  - [Кастомная вкладка](#кастомная-вкладка)
- [Меню на странице](#меню-на-странице)
- [Витрина](#витрина)

</MdxMenu>

## Когда нужна документация

Почти всегда. Когда вы создаёте новый компонент или вносите важные изменения. Например, добавляете новое свойство: нужно добавить его в таблицу, пояснить, как оно работает и добавить пример.

## Структура компонента

Вся информация о компоненте складывается в **папку компонента** — `src/components/ComponentName`

Например:

```tsx
src / components / Button;
```

[Подробнее о файловой структуре компонента](##LIBS.LIB.STAND/lib:portal/stand:portal-filestructure)

Устаревшие и новые компоненты складываются в папки с соответствующим названием, например:

```tsx
src / components / Button; //стабильный компонент
src / components / ButtonDeprecated; //устаревшая версия
src / components / ButtonCanary; //версия в работе
```

Документация для компонента складывается в папку `src/components/ComponentName/__stand__`.

## Настройки компонента

Настроить компонент можно в конфиге страницы: `src/components/ComponentName/__stand__/ComponentName.stand.tsx`

```tsx
export default createStand({
  title: 'Avatar', // заголовок страницы
  id: 'Avatar', // идентификатор страницы, используется в ссылках
  group: 'components', // группа в меню
  description: 'Аватар. Разные формы, цвета и размеры.', // краткое описание
  version: '1.0.0', // версия библиотеки, в которой появился компонент
  status: 'stable', // статус компонента
  sandbox: 'avatar-quh7em', // идентификатор песочницы
  figma:
    'https://www.figma.com/embed?embed_host=uikit.consta.design&url=https://www.figma.com/file/v9Jkm2GrymD277dIGpRBSH/Consta-UI-Kit?node-id=56%3A30966',
  // ссылка на макет компонента в Figma
  order: 10, // порядок в группе
});
```

**Версия** — `version` — версия библиотеки, в которой появился этот компонент. Формат: `'x.x.x'`, где `x` — целое число. Версию можно посмотреть по истории коммитов на GitHub, у макета компонента в Figma нужно указать ту же версию.

**Статус** — статус компонента в процессе разработки.

Варианты:

- `stable` — стабильный компонент.
- `deprecated` — устаревшая версия. Будет удалён, когда версия библиотеки поднимется до мажорной.
- `canary` — экспериментальная версия. Её можно использовать, но параметры компонента могут немного поменяться.

## Вкладки

Вкладки нужны для навигации по странице. На обычной странице может не быть вкладок. На странице компонента обычно есть хотя бы две вкладки — **Обзор** и **Код и свойство**.

### Обзор

Чтобы добавить текст для этой вкладки, в папке с документацией для компонента создайте файл `ComponentName.stand.mdx`.

Вкладка **Обзор** появляется, если на странице есть ещё хотя бы одна вкладка. Если вкладок больше нет, содержимое обзора выводится на основной странице.

На этой вкладке обычно размещается краткое описание компонента: что это за компонент, зачем он нужен, в каких случаях используется, какие у него есть аналоги.

В этой же вкладке отображается [витрина компонента](#витрина). Если её нет, после описания можно добавить визуальный пример.

### Код и свойство

Чтобы добавить вкладку **Код и свойство**, в папке с документацией компонента создайте файл `ComponentName.dev.stand.mdx`.

В этой вкладке — информация для разработки.

#### Шаблон

```
<MdxMenu>
 - [Первый раздел](#раздел-один)
 - [Второй раздел](#раздел-два)
 - [Третий раздел](#раздел-три)
 - [Список свойств](#свойства)
 - [Пример использования](#пример)
</MdxMenu>

`import {ComponentName} from @consta/lib/ComponentName;`

## Раздел один

Описание — код примера — визуальный пример

## Раздел два

## Раздел три

## Свойства

| Свойство | Тип и значения | По умолчанию | Описание |
| -------- | -------------- | ------------ | -------- |
| [``](#)  | `string`       | -            |          |
| [``](#)  | `string`       | -            |          |
| [``](#)  | `string`       | -            |          |
| [``](#)  | `string`       | -            |          |
| ``       | `string`       | -            |          |
| ``       | `string`       | -            |          |

## Пример

```

**Примеры** нужны в каждом разделе. Сначала визуальный пример, потом — его код.

**Код примера** нужно оформить так, чтобы его можно было скопировать и сразу использовать.

> Примеров много не бывает! Но если их правда много, код для каждого можно не писать, просто понятно указать параметры.

Если в тексте документации много полноценных примеров, пример в конце можно не добавлять.

**Текст в примерах:**

- Пишем на русском языке.
- Не используем специфические нефтяные термины и ситуации.
- Стараемся придумать понятный и простой текст.

**Таблица со свойствами**

Нужна во всех компонентах (исключения редки). В документации [графиков](##LIBS.LIB/lib:charts) описываем самые основные свойства и даём ссылку на документацию исходного компонента.

С названия свойства ставим ссылку на раздел, в котором оно подробно описывается.

В таблице есть повторяющиеся свойства. Их описания стараемся сделать одинаковыми (в планах — сделать единый источник для таких описаний).

### Дизайнерам

В этой вкладке подгружается макет компонента из Figma.

Чтобы добавить эту вкладку, укажите ссылку на файл (или фрейм с компонентом) в Figma в настройках страницы `src/components/ComponentName/__stand__/ComponentName.stand.tsx`, в параметре `figma`.

[Посмотреть пример](#настройки-компонента)

### Песочница

Примеры для песочницы собираем в сервисе Sandbox (для этого есть аккаунт).

Чтобы добавить эту вкладку, укажите идентификатор примера из Sandbox в настройках страницы: `src/components/ComponentName/__stand__/ComponentName.stand.tsx`, в параметре `sandbox`.

[Посмотреть пример](#настройки-компонента)

### Кастомная вкладка

В любую библиотеку можно добавить новую вкладку.

Как это сделать:

1. Перенесите конфиг из `node_modules/@consta/stand/scripts/config.js` в папку проекта в `scripts/config.js`.
2. В конфиге добавьте идентификаторы всех вкладок в массив `standTabs`.

Например, так:

```json
standTabs: ['dev', 'design', 'use'],
```

> Вкладки `dev` и `design` используются по умолчанию.

Новую вкладку лучше называть одним словом.

3. В `package.json` указажите конфиг для `stand:generate`:

```json
"stand:generate": "node node_modules/@consta/stand/scripts/standGenerate.js --config=scripts/config.js",
```

4. Опишите настройки для вкладок в `src/stand/standConfig.ts` :

```tsx
export const { createStand } = createConfig({
../../..
standTabs: [
    // табы поумолчанию
    { id: '', label: 'Обзор' },
    { id: 'dev', label: 'Разработчикам' },
    { id: 'design', label: 'Дизайнерам', figma: true },
    { id: 'sandbox', label: 'Песочница', sandbox: true },
    // свои табы
    { id: 'use', label: 'Как использовать' },
  ],
../../..
});
```

Чтобы изменить порядок отображения вкладок на странице, измените их порядок в массиве `standTabs`.

После этого, в папке компонента, нужно создать файл с названием вкладки. Например, чтобы добавить вкладку с идентификатором `use` для компонента `Attachment`, в папке с этим компонентом создайте файл `Attachment.use.stand.mdx`. В него можно добавить содержимое для этой вкладки.

## Меню на странице

Чтобы добавить меню для навигации по вкладке, импортируйте компонент `MdxMenu` и добавьте пункты со ссылками на заголовки.

Например, меню на этой странице добавляется так:

```
import { MdxMenu } from '@consta/stand';

<MdxMenu>

  - [Структура](#структура-компонента)
  - [Настройки
  компонента](#настройки-компонента)
  - [Вкладки](#вкладки)
  - [Обзор](#обзор)
  - [Код и свойство](#код-и-свойство)
  - [Дизайнерам](#дизайнерам)
  - [Песочница](#песочница)
  - [Кастомная вкладка](#кастомная-вкладка)
  - [Меню на
  странице](#меню-на-странице)
  - [Витрина](#витрина)

</MdxMenu>;
```

**Примечания:**

- После тега `<MdxMenu>` и перед `</MdxMenu>` обязательно оставьте пустую строку.
- Ссылка формируется из заголовка автоматически, все пробелы и спецсимволы заменяются на дефис `-`, все заглавные пункты становятся строчными.
- Текст ссылки в меню может быть любым (и не совпадать с текстом заголовка).
- На любой заголовок на странице можно [поставить ссылку](##LIBS) с любой другой страницы.

## Витрина

Витрина добавляется на главную страницу компонента, в **Обзор**, сразу после вкладок. На ней можно менять свойства компонента и смотреть, что с ним происходит.

Чтобы добавить витрину, в папке с документацией для компонента создайте файл `ComponentName.variants.tsx`.

В этом файле опишите параметры, которые хотите вывести на витрину, и вызовите компонент с этими параметрами.

- [Посмотреть параметры для витрины](https://github.com/consta-design-system/stand/blob/main/src/exportAtoms/variants/variants.ts)
- [Посмотреть пример витрины](https://github.com/consta-design-system/uikit/blob/dev/src/components/Attachment/__stand__/Attachment.variants.tsx)
