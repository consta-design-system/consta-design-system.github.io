import { MdxMenu } from '@consta/stand';

Это метадокумент: документация о том, как писать документацию для компонентов. В разделе про [структуру](#структура) есть шаблон: можно скопировать и использовать.

<MdxMenu>

- [Когда нужна документация](#когда-нужна-документация)
- [Структура](#структура)
- [Текст](#текст)
  - [Типографика](#типографика)
  - [Тон и стиль](#тон-и-стиль)
- [Примеры](#примеры)
- [Таблица свойств](#таблица-свойств)
- [Термины](#термины)

</MdxMenu>

## Как всё работает

Документация дизайн-системы работает на самописном движке, который разработала и поддерживает команда Consta. В него входят портал, стенд и библиотеки.

Портал с документацией объединяет все библиотеки Consta.

Библиотеки находятся в разных репозиториях, в каждом репозитории — своя документация. Портал автоматически собирает страницу со списком библиотек и и показывает все библиотеки под общей шапкой.

### Преимущества движка

- Сборка документации из разных репозиториев в один веб-документ, с общей навигацией и оформлением.
- Кастомная витрина для демонстрации компонентов, с удобным вариантами представления и просмотра.
- Песочница Sandbox.
- Статусы компонентов (можно добавить любые).
- Поиск по компонентам с фильтрами для статусов (`Deprecated`, `Canary`), адаптированная к нашим процессам разработки и выкладки компонентов.
- Кастомные вкладки в статьях.

## Портал

Адрес портала: https://portal.consta.design/

Портал — это рамка для всех библиотек. Что есть на портале:

- главная страница — со списком библиотек,
- общая документация по дизайн-системе.

### Как собрать или обновить страницу со списком библиотек

Адрес страницы: `<адрес портала>` + `libs`, например https://portal.consta.design/libs

##### Шаг 1. Обновить конфиг стенда в библиотеке

В репозитории библиотеки, которую нужно добавить на страницу, заполнить конфигурационный файл стенда `stand/standConfig.ts` и выложить в продакшен в основную ветку (обычно это `master`).

##### Шаг 2. Добавит репозиторий библиотеки

Добавить репозиторий и ветку, из которой нужно взять данные для библиотеки, в список [clone-repositories.sh](https://github.com/consta-design-system/portal/blob/master/clone-repositories.sh)

Например, так:

```tsx
git clone -b master https://${REPO_ACCESS_TOKEN}@github.com/consta-design-system/uikit.git ./repositories/uikit`
```

##### Шаг 3. Добавить алиас библиотеки

Добавить алиас библиотеки в [webpack.config.js](https://github.com/consta-design-system/portal/blob/master/webpack.config.js) в объект `repos`:

```tsx
const repos = [
  'analytic-ui',
  'uikit',
  'charts',
  'header',
  'stats',
  'react-big-calendar-adapter',
  'gantt-task-react-adapter',
  'rc-tree-adapter',
  'rc-table-adapter',
  'ag-grid-adapter',
  'widgets',
  'amcharts-map-examples',
  'gpn-responses',
  'icons',
];
```

Это нужно для работы абсолютный путей через `##`. Например, `##/utils/bem` в репозитории `@consta/uikit` обрабатывается как `/repositories/uikit/utils/bem`, а в `@consta/header` — как `/repositories/header/utils/bem`

##### Шаг 4. Собрать портал

```
# клонировать репозитории
yarn clone-repos

# копировать зависимости репозиториев в проект (если нужно)
yarn copy-deps

# установить зависимости
yarn install

# запустить стенд
yarn start
```

### Как редактировать верхнее меню

### Как редактировать левое меню

### Как редактировать документы

#### Вкладки

#### Версия

#### Ссылка на GitHub

#### Меню на странице

#### Витрина

#### Превью файла в Figma

#### Песочница

####

## Стенд

### Конфигурация стенда

```tsx
import { createConfig } from '@consta/stand';

import image from './ConstaImage.png';
import description from './description.mdx';

export const { createStand, createPage } = createConfig({
  title: 'Документация дизайн-системы',
  id: 'portal',
  groups: [
    {
      title: 'О дизайн-системе',
      id: 'about',
    },
    {
      title: 'Тематизация',
      id: 'theme',
    },
    {
      title: 'Как работать с Consta',
      id: 'workflow',
    },
    {
      title: 'Кастомизация',
      id: 'custom',
    },
    {
      title: 'Правила и справочники',
      id: 'reference',
    },
  ],
  group: 'Общая документация',
  image,
  description,
  repositoryUrl: 'https://github.com/consta-design-system/portal',
});
```

### Конфигурация страницы ?? (нужен раздел)

## Библиотеки

# Документация компонента

## Когда нужна документация

Почти всегда. На самом деле — если вы создаёте новый компонент или вносите важные изменения. Например, добавляете новое свойство: нужно добавить его в таблицу, пояснить, как оно работает, и добавить пример.

## Структура

```
# Название компонента

Этот компонент — вот такой. Нужен, чтобы делать это, это и ещё вот это.

- [Первый раздел](#первый-раздел)
- [Второй раздел](#второй-раздел)
- [Третий раздел](#третий-раздел)
- [Список свойств](#свойства)
- [Пример использования](#пример)

## Первый раздел

## Второй раздел

## Третий раздел

## Свойства

| Свойство | Тип и значения | По умолчанию | Описание |
| -------- | -------------- | ------------ | -------- |
| [``](#)  | `string`       | -            |          |
| [``](#)  | `string`       | -            |          |
| [``](#)  | `string`       | -            |          |
| [``](#)  | `string`       | -            |          |
| ``       | `string`       | -            |          |
| ``       | `string`       | -            |          |

## Пример

```

## Текст

### Тон и стиль

Эта документация — практическое руководство, которым пользуются при разарботке.
Человек её открывает, чтобы решить конкретную проблему или найти ответ на вопрос.
Поэтому можно представить, что вы пишете письмо не слишком знакомому человеку,
в котором рассказываете, как работает компонент и что с его помощью можно сделать.

- Пишите просто и по делу, в примерах можно пошутить (но так, чтобы это не отвлекало от темы). В тексте не стоит.
- Обращение — **на вы** со строчной буквы, можно использовать повелительное наклонение, как в инструкции: **создайте, сделайте, напишите**.
- Тон — нейтральный, уважительный и дружелюбный, без фамильярности и пафоса.
- Профессиональный жаргон приветствуется, но лучше использовать русские термины вместо английских, если они распространены и не режут глаз и слух.

### Типографика

Ё пишем.

Тире — длинное.

Кавычки — «ёлочки».

Названия свойств заключаем в апострофы: `этоСвойство`. Значения — в апострофы и одинарные кавычки: `'это_значение'`.

Названия элементов интерфейса выделяем жирным: например, нажмите на кнопку **Запустить салют**.

Нумерованные списки вот такие:

1. первый пункт,
2. второй пункт,
3. третий пункт.

##### Список с заголовком

1. Первый пункт.
2. Второй пункт.
3. Третий пункт.

Без нумерации — такие:

- один пункт,
- другой пункт,
- ещё один пункт.

##### Список с заголовком

- Первый пункт.
- Второй пункт.
- Третий пункт.

## Примеры

Нужны в каждом разделе. Сначала визуальный пример, потом — его код.

### Код примеров

Код примера нужно оформить так, чтобы его можно было скопировать и сразу использовать.

> Примеров много не бывает! Но если их правда много, код для каждого можно не писать, просто понятно указать параметры.

Если в тексте документации много полноценных примеров, пример в конце можно не добавлять.

### Текст в примерах

- пишем по-русски,
- не используем специфические нефтяные термины и ситуации,
- стараемся придумать понятный текст, похожий на реальный.

## Таблица

Нужна во всех компонентах (исключения редки). В документации [графиков](http://charts.consta.design) описываем самые основные свойства и даём ссылку на документацию исходного компонента.

С названия свойства ставим ссылку на раздел, в котором оно подробно описывается.

В таблице есть повторяющиеся свойства. Их описания стараемся сделать одинаковыми (в планах — сделать единый источник для таких описаний).
